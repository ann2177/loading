<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loading...</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 50px;

      /* Flexbox centering */
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 0;
      height: 80vh;
      flex-direction: column;
      position: relative;
      overflow: hidden;

      /* Background image */
      background-image: url('https://i.postimg.cc/2S2tBTwW/Telegram.jpg');
      background-size: cover;
      background-position: center top;
      background-attachment: fixed;

       /*  This moves the whole content up by 10% */
      transform: translateY(-5%);
    }

    .button-container {
      position: relative;
      z-index: 1;
       display: flex;
      flex-direction: column;
      gap: 20px; /* Space between buttons */
      
    }

    .button {
      background-color: #24A1DE;
      border: 0;
      color: white;
      padding: 15px 32px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      font-weight: bold;
      margin: 10px 2px;
      cursor: pointer;
      border-radius: 15px;
      box-shadow: 0 8px 12px rgba(0, 0, 0, 0.3);
      transition: transform 0.3s ease, background-color 0.3s ease;
    }

    .button:hover {
      background-color: #24A1DE;
      color: white;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
      transform: scale(1.1);
    }

    p {
      color: white;
    }
    
    h2 {
      color: White;
      margin-bottom: 30px;
    }
    
  </style>

  <!-- Disable Inspect Element Shortcuts -->
  <script>
    document.addEventListener('contextmenu', event => event.preventDefault());
    document.onkeydown = function (e) {
      if (
        e.keyCode === 123 || // F12
        (e.ctrlKey && e.shiftKey && e.keyCode === 73) || // Ctrl+Shift+I
        (e.ctrlKey && e.shiftKey && e.keyCode === 74) || // Ctrl+Shift+J
        (e.ctrlKey && e.keyCode === 85) // Ctrl+U
      ) {
        return false;
      }
    };
  </script>
</head>
<body>

  <h2>Select Server</h2>
  <div id="buttonContainer" class="button-container"></div>

  <script>
  // Fisher-Yates Shuffle Function
  function fisherYatesShuffle(array) {
    const shuffled = array.slice(); // copy array
    for (let i = shuffled.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled;
  }

  // Controlled Biased Shuffle (10% chance to make Telegram first)
  function biasedShuffle(buttons, telegramLink) {
    const telegramBtn = buttons.find(b => b.type === "telegram");
    const others = buttons.filter(b => b.type !== "telegram");

    const chance = Math.random(); // 0 to 1
    let shuffled;

    if (telegramBtn && chance <= 0.10) {
      // 10% chance: Telegram comes first
      const shuffledOthers = fisherYatesShuffle(others);
      shuffled = [telegramBtn, ...shuffledOthers];
    } else {
      // 90% chance: Telegram never comes first
      const shuffledOthers = fisherYatesShuffle(others);
      if (telegramBtn) {
        // Insert Telegram at random position (not first)
        const insertIndex = Math.floor(Math.random() * (shuffledOthers.length)) + 1;
        shuffledOthers.splice(insertIndex, 0, telegramBtn);
      }
      shuffled = shuffledOthers;
    }

    return shuffled;
  }

  window.onload = function () {
    const telegramLink = new URLSearchParams(window.location.search).get("link");
    const adLinks = [
      "https://dedicationageunfortunately.com/uxfadd83ug?key=f49b9c499c4dba3250af0a6fa8ca79f4",
      "https://dedicationageunfortunately.com/pc2npqv1q?key=ce938f1b0334a4a833f4137da0cd4094"
    ];

    const buttons = [];

    if (telegramLink) {
      buttons.push({ type: "telegram", url: telegramLink });
    }

    adLinks.forEach(link => {
      buttons.push({ type: "ad", url: link });
    });

    const storageKey = "shuffledButtons_" + encodeURIComponent(telegramLink || "noLink");

    let shuffled;
    try {
      shuffled = JSON.parse(localStorage.getItem(storageKey));
    } catch (e) {
      console.warn("Invalid cached shuffle data. Reshuffling.");
    }

    if (!Array.isArray(shuffled)) {
      shuffled = biasedShuffle(buttons, telegramLink);
      localStorage.setItem(storageKey, JSON.stringify(shuffled));
    }

    const container = document.getElementById("buttonContainer");
    if (!container) {
      console.error("Error: #buttonContainer not found in DOM.");
      return;
    }

    shuffled.forEach((btn, index) => {
      const button = document.createElement("button");
      button.className = "button";
      button.innerText = "Server " + (index + 1);
      button.onclick = () => {
        if (btn.type === "telegram" && !btn.url) {
          document.body.innerHTML = "<h2>Error: Video link not provided!</h2>";
        } else {
          window.location.href = btn.url;
        }
      };
      container.appendChild(button);
    });
  }
</script>


</body>
</html>
